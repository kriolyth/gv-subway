(self.webpackChunkgv_subway_web=self.webpackChunkgv_subway_web||[]).push([[106],{447:(e,t,l)=>{"use strict";l.d(t,{bL:()=>o,Qr:()=>n,Or:()=>c});var s=l(168);e=l.hmd(e);let r=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});r.decode();let i=null;const o=Object.freeze({Wall:0,0:"Wall",Pass:1,1:"Pass",Entrance:2,2:"Entrance",Treasury:3,3:"Treasury",Subtreasury:4,4:"Subtreasury"});class n{static __wrap(e){const t=Object.create(n.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();s.__wbg_subway_free(e)}constructor(){var e=s.subway_new();return n.__wrap(e)}set_field(e,t){s.subway_set_field(this.ptr,e,t)}get_field(e){return s.subway_get_field(this.ptr,e)>>>0}get_visited_probability(e){return s.subway_get_visited_probability(this.ptr,e)}init(){s.subway_init(this.ptr)}step(e){s.subway_step(this.ptr,e)}}function c(e,t){throw new Error((l=e,o=t,r.decode((null!==i&&i.buffer===s.memory.buffer||(i=new Uint8Array(s.memory.buffer)),i).subarray(l,l+o))));var l,o}},123:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>n});var s=l(81),r=l.n(s),i=l(645),o=l.n(i)()(r());o.push([e.id,"\n#maze {\n        width: 520px;\n        display: inline-block;\n}\n#calc {\n        margin-top: 24px;\n}\n#drawtool {\n        text-align: center;\n}\n#drawtool .cell {\n        cursor: pointer;\n        margin: 24px 12px;\n        border: 2px solid transparent;\n}\n#drawtool .cell.selected {\n        border: 2px solid black;\n}\n#numsteps {\n        width: 100%;\n}\n",""]);const n=o},370:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>n});var s=l(81),r=l.n(s),i=l(645),o=l.n(i)()(r());o.push([e.id,"\n.row {\n        cursor: pointer;\n}\n",""]);const n=o},435:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>n});var s=l(81),r=l.n(s),i=l(645),o=l.n(i)()(r());o.push([e.id,"\n.cell {\n        display: inline-block;\n        width: 24px;\n        height: 24px;\n        font-size: 10pt;\n        font-family: 'Courier New', Courier, monospace;\n        margin: 0;\n        border: 1px solid silver;\n        line-height: 24px;\n        text-align: center;\n\n        background-color: white;\n}\n.wall {\n        background-color: gray;\n}\n",""]);const n=o},106:(e,t,l)=>{"use strict";l.r(t);var s=l(963),r=l(252),i=l(577);const o=(0,r._)("p",null,"Placeholder keeps this place warmer",-1),n={id:"maze"},c={id:"drawtool"},a={id:"calc"},u=(0,r._)("br",null,null,-1);var d=l(447),p=l(245),h=l.n(p);const w=(0,r.aZ)({setup(){},props:{id:Number,cellType:Number,colourScheme:{type:Number,default:-1},colourValue:Number},computed:{cellClass(){return{wall:this.cellType==d.bL.Wall,pass:this.cellType==d.bL.Pass,entrance:this.cellType==d.bL.Entrance,treasury:this.cellType==d.bL.Treasury,subtreasury:this.cellType==d.bL.Subtreasury}},symbol(){return["#","Â ","ðŸšª","ðŸ’°","ðŸ“¦"][this.$props.cellType??1]},cellColour(){return this.$props.colourScheme<0||this.cellType==d.bL.Wall||0==this.colourValue?{}:{backgroundColor:"#"+this.colourSchemes[this.$props.colourScheme].colourAt(100*(this.colourValue??0))}}},data(){const e=new(h());return e.setSpectrum("ffc0e0","c0c0ff","3030a0"),{lastEmitted:(new Date).getTime(),colourSchemes:[e]}},emits:["touchcell"],methods:{onMove(e){let t=(new Date).getTime();e.buttons&&t-this.lastEmitted>50&&(this.$emit("touchcell",this.id),this.lastEmitted=t)}}});l(452);var m=l(744);const b=(0,m.Z)(w,[["render",function(e,t,l,o,n,c){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["cell",e.cellClass]),style:(0,i.j5)(e.cellColour),onMousedown:t[0]||(t[0]=(0,s.iM)((e=>this.$emit("touchcell",this.id)),["prevent"])),onMousemove:t[1]||(t[1]=(...t)=>e.onMove&&e.onMove(...t))},(0,i.zw)(e.symbol),39)}]]),f=(0,r.aZ)({components:{mazecell:b},props:{width:Number,cells:Array},data(){return{rowWidth:this.$props.width??1,mazeCells:this.$props.cells??[]}},emits:["touchcell"],setup(){},computed:{cellRows(){let e=[];for(let t=0;t<this.mazeCells.length/this.rowWidth;t++)e.push(this.mazeCells.slice(t*this.rowWidth,(t+1)*this.rowWidth));return e}},methods:{forwardTouchCell(e){this.$emit("touchcell",e)}}});l(386);const y=(0,m.Z)(f,[["render",function(e,t,l,s,i,o){const n=(0,r.up)("mazecell");return(0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.cellRows,((t,l)=>((0,r.wg)(),(0,r.iD)("div",{class:"row",key:l},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t,((t,s)=>((0,r.wg)(),(0,r.j4)(n,{colourScheme:0,colourValue:t.prob,cellType:t.cellType,id:s+l*this.rowWidth,key:s+l*this.rowWidth,onTouchcell:e.forwardTouchCell},null,8,["colourValue","cellType","id","onTouchcell"])))),128))])))),128)}]]),_=(0,r.aZ)({components:{maze:y,mazecell:b},data(){let e={cellType:d.bL.Wall,prob:0},t=new Array(400);for(let l=0;l<400;l++)t[l]={...e};return{field:new d.Qr,cells:t,drawMode:d.bL.Pass,specials:[-1,-1,-1],numSteps:0}},emits:["recalculate"],methods:{touchCell(e){if(this.cells[e].cellType!=this.drawMode){this.specials.indexOf(e)>=0&&(this.specials[this.specials.indexOf(e)]=-1),this.field.set_field(e,this.drawMode),this.cells[e].cellType=this.field.get_field(e);const t=[d.bL.Entrance,d.bL.Treasury,d.bL.Subtreasury].indexOf(this.drawMode);if(t>=0){const l=this.specials[t];l>=0&&(this.field.set_field(l,d.bL.Pass),this.cells[l].cellType=this.field.get_field(l)),this.specials[t]=e}this.specials[0]>=0&&this.specials[1]>=0&&this.numSteps>0&&this.recalculate(this.numSteps)}},selectTool(e){this.drawMode=e},recalculate(e,t=0){t||this.field.init();for(let l=1;l<=e;l++)this.field.step(l+t);for(let e=0;e<400;e++)this.cells[e].cellType!=d.bL.Wall&&(this.cells[e].prob=this.field.get_visited_probability(e))},reset(){for(let e=0;e<400;e++)this.cells[e].cellType!=d.bL.Wall&&(this.cells[e].prob=0)}},watch:{numSteps(e,t){0==e?this.reset():this.specials[0]>=0&&this.specials[1]>=0&&this.numSteps>0&&(e>t?this.recalculate(e-t,t):this.recalculate(e))}}});l(919);const g=(0,m.Z)(_,[["render",function(e,t,l,d,p,h){const w=(0,r.up)("maze"),m=(0,r.up)("mazecell");return(0,r.wg)(),(0,r.iD)(r.HY,null,[o,(0,r._)("div",n,[(0,r.Wm)(w,{width:20,cells:e.cells,onTouchcell:e.touchCell},null,8,["cells","onTouchcell"]),(0,r._)("div",c,[(0,r._)("div",null,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(5,(t=>(0,r.Wm)(m,{key:t,id:1e3+t,cellType:t-1,class:(0,i.C_)({selected:t-1==e.drawMode}),onClick:l=>e.selectTool(t-1)},null,8,["id","cellType","class","onClick"]))),64))])]),(0,r._)("div",a,[(0,r.wy)((0,r._)("input",{id:"numsteps",type:"range",min:"0",max:"100","onUpdate:modelValue":t[0]||(t[0]=t=>e.numSteps=t)},null,512),[[s.nr,e.numSteps]]),u,(0,r.Uk)("Steps: "+(0,i.zw)(e.numSteps),1)])])],64)}]]);(0,s.ri)(g).mount("#main")},919:(e,t,l)=>{var s=l(123);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,l(346).Z)("28e662bc",s,!1,{})},386:(e,t,l)=>{var s=l(370);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,l(346).Z)("f15b1044",s,!1,{})},452:(e,t,l)=>{var s=l(435);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,l(346).Z)("0fdad9f4",s,!1,{})},168:(e,t,l)=>{"use strict";var s=l.w[e.id];e.exports=s,l(447),s[""]()}}]);