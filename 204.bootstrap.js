(self.webpackChunkgv_subway_web=self.webpackChunkgv_subway_web||[]).push([[204],{447:(e,l,t)=>{"use strict";t.d(l,{bL:()=>n,Qr:()=>c,Or:()=>o});var s=t(168);e=t.hmd(e);let i=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});i.decode();let r=null;const n=Object.freeze({Wall:0,0:"Wall",Pass:1,1:"Pass",Entrance:2,2:"Entrance",Treasury:3,3:"Treasury",Subtreasury:4,4:"Subtreasury"});class c{static __wrap(e){const l=Object.create(c.prototype);return l.ptr=e,l}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();s.__wbg_subway_free(e)}constructor(){var e=s.subway_new();return c.__wrap(e)}set_field(e,l){s.subway_set_field(this.ptr,e,l)}get_field(e){return s.subway_get_field(this.ptr,e)>>>0}get_visited_probability(e){return s.subway_get_visited_probability(this.ptr,e)}init(){s.subway_init(this.ptr)}step(e){s.subway_step(this.ptr,e)}}function o(e,l){throw new Error((t=e,n=l,i.decode((null!==r&&r.buffer===s.memory.buffer||(r=new Uint8Array(s.memory.buffer)),r).subarray(t,t+n))));var t,n}},978:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>c});var s=t(81),i=t.n(s),r=t(645),n=t.n(r)()(i());n.push([e.id,"\nh3 {\n        text-align: center;\n}\n#maze {\n        width: 520px;\n        display: inline-block;\n}\n#drawtool {\n        text-align: center;\n}\n#drawtool .cell {\n        cursor: pointer;\n        margin: 24px 12px;\n        border: 2px solid transparent;\n}\n#drawtool .cell.selected {\n        border: 2px solid black;\n}\n#numsteps {\n        width: 100%;\n}\n#link {\n        margin-top: 24px;\n}\n#link input {\n        width: 80%;\n        margin-left: 1em;\n}\n",""]);const c=n},370:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>c});var s=t(81),i=t.n(s),r=t(645),n=t.n(r)()(i());n.push([e.id,"\n.row {\n        cursor: pointer;\n}\n",""]);const c=n},435:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>c});var s=t(81),i=t.n(s),r=t(645),n=t.n(r)()(i());n.push([e.id,"\n.cell {\n        display: inline-block;\n        width: 24px;\n        height: 24px;\n        font-size: 10pt;\n        font-family: 'Courier New', Courier, monospace;\n        margin: 0;\n        border: 1px solid silver;\n        line-height: 24px;\n        text-align: center;\n\n        background-color: white;\n}\n.wall {\n        background-color: gray;\n}\n",""]);const c=n},204:(e,l,t)=>{"use strict";t.r(l);var s=t(963),i=t(252),r=t(577);const n=(0,i._)("h3",null,"–ö—É–¥–∞ —É—Ö–æ–¥—è—Ç –±—Ä–µ–≤–Ω–æ–≤–æ–∑—ã",-1),c={id:"maze"},o={id:"drawtool"},a={id:"calc"},u=(0,i._)("br",null,null,-1),p={id:"link"},d=(0,i.Uk)("–ö–∞—Ä—Ç–∞: "),h=["value"];var b=t(447),f=t(245),y=t.n(f);const w=(0,i.aZ)({setup(){},props:{id:Number,cellType:Number,colourScheme:{type:Number,default:-1},colourValue:Number},computed:{cellClass(){return{wall:this.cellType==b.bL.Wall,pass:this.cellType==b.bL.Pass,entrance:this.cellType==b.bL.Entrance,treasury:this.cellType==b.bL.Treasury,subtreasury:this.cellType==b.bL.Subtreasury}},symbol(){return["#","¬†","üö™","üí∞","üì¶"][this.$props.cellType??1]},cellColour(){return this.$props.colourScheme<0||this.cellType==b.bL.Wall||0==this.colourValue?{}:{backgroundColor:"#"+this.colourSchemes[this.$props.colourScheme].colourAt(100*(this.colourValue??0))}}},data(){const e=new(y());return e.setSpectrum("ffc0e0","c0c0ff","3030a0"),{lastEmitted:(new Date).getTime(),colourSchemes:[e]}},emits:["touchcell"],methods:{onMove(e){let l=(new Date).getTime();e.buttons&&l-this.lastEmitted>50&&(this.$emit("touchcell",this.id),this.lastEmitted=l)}}});t(452);var m=t(744);const _=(0,m.Z)(w,[["render",function(e,l,t,n,c,o){return(0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["cell",e.cellClass]),style:(0,r.j5)(e.cellColour),onMousedown:l[0]||(l[0]=(0,s.iM)((e=>this.$emit("touchcell",this.id)),["prevent"])),onMousemove:l[1]||(l[1]=(...l)=>e.onMove&&e.onMove(...l))},(0,r.zw)(e.symbol),39)}]]),g=(0,i.aZ)({components:{mazecell:_},props:{width:Number,cells:Array},data(){return{rowWidth:this.$props.width??1,mazeCells:this.$props.cells??[]}},emits:["touchcell"],setup(){},computed:{cellRows(){let e=[];for(let l=0;l<this.mazeCells.length/this.rowWidth;l++)e.push(this.mazeCells.slice(l*this.rowWidth,(l+1)*this.rowWidth));return e}},methods:{forwardTouchCell(e){this.$emit("touchcell",e)}}});t(386);const T=(0,m.Z)(g,[["render",function(e,l,t,s,r,n){const c=(0,i.up)("mazecell");return(0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.cellRows,((l,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"row",key:t},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l,((l,s)=>((0,i.wg)(),(0,i.j4)(c,{colourScheme:0,colourValue:l.prob,cellType:l.cellType,id:s+t*this.rowWidth,key:s+t*this.rowWidth,onTouchcell:e.forwardTouchCell},null,8,["colourValue","cellType","id","onTouchcell"])))),128))])))),128)}]]),v=(0,i.aZ)({components:{maze:T,mazecell:_},data(){let e={cellType:b.bL.Wall,prob:0},l=new Array(400);for(let t=0;t<400;t++)l[t]={...e};return{field:new b.Qr,cells:l,drawMode:b.bL.Pass,specials:[-1,-1,-1],numSteps:0}},computed:{getUrl(){let e="",l="AAA";for(let t=20;t<=360;t+=20){let s="";for(let e=1;e<=18;e+=6){let l=32*+(this.cells[t+e].cellType!=b.bL.Wall)+16*+(this.cells[t+e+1].cellType!=b.bL.Wall)+8*+(this.cells[t+e+2].cellType!=b.bL.Wall)+4*+(this.cells[t+e+3].cellType!=b.bL.Wall)+2*+(this.cells[t+e+4].cellType!=b.bL.Wall)+ +(this.cells[t+e+5].cellType!=b.bL.Wall);s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".substr(l,1)}s==l?s="~":l=s,e+=s}return`f=${e}&e=${this.specials[0]}&t=${this.specials[1]}&s=${this.specials[2]}`}},methods:{parseUrl(e){try{const l=e.currentTarget.value,t=new Map;l.split("&").forEach((e=>{let[l,s]=e.split("=");t.set(l,s)}));const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";let i="AAA",r=t.get("f")||"";for(let e=20;e<=360;e+=20){let l="";"~"==r.substr(0,1)?(l=i,r=r.substring(1)):(l=r.substr(0,3),i=l,r=r.substring(3));for(let t=1;t<=18;t+=6){let i=s.indexOf(l.substr(0,1));l=l.substring(1);for(let l=0;l<6;l++)this.field.set_field(e+t+l,i&1<<5-l?b.bL.Pass:b.bL.Wall)}}this.specials[0]=parseInt(t.get("e")||"-1"),this.specials[1]=parseInt(t.get("t")||"-1"),this.specials[2]=parseInt(t.get("s")||"-1"),this.specials[0]>=0&&this.field.set_field(this.specials[0],b.bL.Entrance),this.specials[1]>=0&&this.field.set_field(this.specials[1],b.bL.Treasury),this.specials[2]>=0&&this.field.set_field(this.specials[2],b.bL.Subtreasury);for(let e=0;e<400;e++)this.cells[e].cellType=this.field.get_field(e)}catch(e){console.log(e)}},touchCell(e){if(this.cells[e].cellType!=this.drawMode){this.specials.indexOf(e)>=0&&(this.specials[this.specials.indexOf(e)]=-1),this.field.set_field(e,this.drawMode),this.cells[e].cellType=this.field.get_field(e);const l=[b.bL.Entrance,b.bL.Treasury,b.bL.Subtreasury].indexOf(this.drawMode);if(l>=0){const t=this.specials[l];t>=0&&(this.field.set_field(t,b.bL.Pass),this.cells[t].cellType=this.field.get_field(t)),this.specials[l]=e}this.specials[0]>=0&&this.specials[1]>=0&&this.numSteps>0&&this.recalculate(this.numSteps)}},selectTool(e){this.drawMode=e},recalculate(e,l=0){l||this.field.init();for(let t=1;t<=e;t++)this.field.step(t+l);for(let e=0;e<400;e++)this.cells[e].cellType!=b.bL.Wall&&(this.cells[e].prob=this.field.get_visited_probability(e))},reset(){this.field.init();for(let e=0;e<400;e++)this.cells[e].cellType!=b.bL.Wall&&(this.cells[e].prob=0)}},watch:{numSteps(e,l){0==e?this.reset():this.specials[0]>=0&&this.specials[1]>=0&&this.numSteps>0&&(e>l?this.recalculate(e-l,l):this.recalculate(e))}}});t(290);const L=(0,m.Z)(v,[["render",function(e,l,t,b,f,y){const w=(0,i.up)("maze"),m=(0,i.up)("mazecell");return(0,i.wg)(),(0,i.iD)(i.HY,null,[n,(0,i._)("div",c,[(0,i.Wm)(w,{width:20,cells:e.cells,onTouchcell:e.touchCell},null,8,["cells","onTouchcell"]),(0,i._)("div",o,[(0,i._)("div",null,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(5,(l=>(0,i.Wm)(m,{key:l,id:1e3+l,cellType:l-1,class:(0,r.C_)({selected:l-1==e.drawMode}),onClick:t=>e.selectTool(l-1)},null,8,["id","cellType","class","onClick"]))),64))])]),(0,i._)("div",a,[(0,i.wy)((0,i._)("input",{id:"numsteps",type:"range",min:"0",max:"100","onUpdate:modelValue":l[0]||(l[0]=l=>e.numSteps=l)},null,512),[[s.nr,e.numSteps]]),u,(0,i.Uk)("–®–∞–≥–æ–≤: "+(0,r.zw)(e.numSteps),1)]),(0,i._)("div",p,[(0,i._)("label",null,[d,(0,i._)("input",{value:e.getUrl,onChange:l[1]||(l[1]=(...l)=>e.parseUrl&&e.parseUrl(...l))},null,40,h)])])])],64)}]]);(0,s.ri)(L).mount("#main")},290:(e,l,t)=>{var s=t(978);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(346).Z)("5dec1d62",s,!1,{})},386:(e,l,t)=>{var s=t(370);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(346).Z)("f15b1044",s,!1,{})},452:(e,l,t)=>{var s=t(435);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(346).Z)("0fdad9f4",s,!1,{})},168:(e,l,t)=>{"use strict";var s=t.w[e.id];e.exports=s,t(447),s[""]()}}]);